{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '45291031-b2314e04d4a4ac01a9efb8f44';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query.query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${query.page}&per_page=15`;\n\n    try {\n        const response = await axios.get(url)\n        if (response.status !== 200) {\n            throw new Error('Failed to fetch images');\n        }\n        const responseData = response.data;\n        return responseData;\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\nexport function renderImages(images) { \n    const gallery = document.querySelector('.gallery');\n    \n    const markup = images.map((item) => {\n        return `\n            <a href=\"${item.largeImageURL}\" class=\"photo-card\">\n                <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" />\n                <div class=\"info\">\n                    <p class=\"info-item\">\n                        <b>Likes:</b> ${item.likes}\n                    </p>\n                    <p class=\"info-item\">\n                        <b>Views:</b> ${item.views}\n                    </p>\n                    <p class=\"info-item\">\n                        <b>Comments:</b> ${item.comments}\n                    </p>\n                    <p class=\"info-item\">\n                        <b>Downloads:</b> ${item.downloads}\n                    </p>\n                </div>\n            </a>\n        `;\n    }).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showNoResultsMessage() {\n    iziToast.warning({\n        title: 'Warning',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight'\n    });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, showNoResultsMessage } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet appState = {}\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nconst searchForm = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.btn-load');\nconst endText = document.querySelector('.end-loader');\n\nloadMore.addEventListener('click', async (event) => {\n    event.preventDefault();\n    showLoading();\n    appState.page = appState.page + 1;\n    try {\n        const responseData = await fetchImages(appState);\n        if (appState.page * 15 >= responseData.totalHits) {\n            loadMore.style.display = \"none\";\n            endText.style.display = \"block\";\n        } else {\n            loadMore.style.display = \"block\";\n            endText.style.display = \"none\";\n        }\n        const images = responseData.hits;\n\n        renderImages(images);\n        lightbox.refresh();\n\n        const cardHeight = document.querySelector('.photo-card').getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.',\n            position: 'topRight'\n        });\n    } finally {\n        hideLoading();\n    }\n});\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const query = event.target.elements.searchQuery.value.trim();\n\n    if (query === '') {\n        return iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query!',\n            position: 'topRight'\n        });\n    }\n\n    clearGallery();\n    showLoading();\n\n    appState = {\n        query,\n        page: 1\n    }\n\n    try {\n        const responseData = await fetchImages(appState);\n        if (appState.page * 15 >= responseData.totalHits) {\n            loadMore.style.display = \"none\";\n            endText.style.display = \"block\";\n        } else {\n            loadMore.style.display = \"block\";\n            endText.style.display = \"none\";\n        }\n        const images = responseData.hits;\n\n        if (images.length === 0) {\n            showNoResultsMessage();\n        } else {\n            renderImages(images);\n            lightbox.refresh();\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.',\n            position: 'topRight'\n        });\n    } finally {\n        hideLoading();\n    }\n});\n\nfunction showLoading() {\n    loader.style.display = 'block';\n}\n\nfunction hideLoading() {\n    loader.style.display = 'none';\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","url","response","axios","error","clearGallery","gallery","renderImages","images","markup","item","showNoResultsMessage","iziToast","appState","lightbox","SimpleLightbox","searchForm","loader","loadMore","endText","event","showLoading","responseData","cardHeight","hideLoading"],"mappings":"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"}